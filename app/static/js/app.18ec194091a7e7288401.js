webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},r,!1,function(t){i("gsu9")},null,null).exports,s=i("/ocq"),l=i("fZjL"),o=i.n(l),m=i("Zx67"),u=i.n(m),h=i("Gu7T"),p=i.n(h),v=i("zwoO"),c=i.n(v),d=i("Pf15"),f=i.n(d),T=i("Zrlr"),g=i.n(T),y=i("wxAW"),x=i.n(y),L=i("d7EF"),w=i.n(L),F="interval_tier",N="point_tier",k=1e-8;function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===i&&(i=t.minTimestamp),null===n&&(n=t.maxTimestamp),0===t.entryList.length&&t.entryList.push([i,n,e]);for(var r=t.entryList.slice(),a=r[0],s=parseFloat(a[1]),l=[a],o=1;o<r.length;o++){var m=parseFloat(r[o][0]),u=parseFloat(r[o][1]);s<m&&l.push([s,m,e]),l.push(r[o]),s=u}if(parseFloat(l[0][0])<parseFloat(i))throw new Error("Tier data is before the tier start time.");if(parseFloat(l[0][0])>parseFloat(i)&&l.splice(0,0,[i,l[0][0],e]),null!==n){if(parseFloat(l[-1][1])>parseFloat(n))throw new Error("Tier data is after the tier end time.");parseFloat(l[-1][1])<parseFloat(n)&&l.splice([l[-1][1],n,e])}return new z(t.name,l,t.minTimestamp,t.maxTimestamp)}function b(t,e){for(var i=[],n=0,r=0;r<t.entryList.length;r++){var a=w()(t.entryList[r],3),s=a[0],l=a[1],o=a[2];l-s<e?i.length>0&&(i[n-1]=(i[n-1],i[n-1])):(0===i.length&&0!==s?i.push([0,l,o]):i.push([s,l,o]),n+=1)}for(n=0;n<i.length-1;){var m=Math.abs(i[n][1]-i[n+1][0]);m>0&&m<k&&(i[n]=[i[n][0],i[n+1][0],i[n][2]])}return t.newCopy({entryList:i})}function D(t,e,i){for(var n=[],r=0,a=void 0;(!i||n.length<i-1)&&-1!==(a=t.indexOf(e,r));)n.push(t.substring(r,a)),r=a+e.length;return n.push(t.substring(r)),n}function E(t,e){for(var i=[],n=t.indexOf(e);-1!==n;)i.push(n),n+=1,n=t.indexOf(e,n);return i}function O(t,e,i){var n=t.indexOf(e,i)+e.length,r=t.indexOf("\n",n),a=t.substring(n,r);return'"'===(a=a.trim())[0]&&'"'===a[a.length-1]&&(a=a.substring(1,a.length-1)),a=a.trim(),-1!==r&&(r+=1),[a,r]}var C=function(){function t(e,i,n,r){g()(this,t),this.name=e,this.entryList=i,this.minTimestamp=n,this.maxTimestamp=r,this.tierType=null}return x()(t,[{key:"appendTier",value:function(t){var e=this.minTimestamp;t.minTimestamp<e&&(e=t.minTimestamp);var i=this.maxTimestamp+t.maxTimestamp,n=t.editTimestamps(this.maxTimestamp,allowOvershoot=!0);if(this.tierType!==t.tierType)throw new Error("Tier types must match when appending tiers.");var r=this.entryList+n.entryList;return r.sort(function(t,e){return t[0]<t[1]}),this.newCopy(this.name,r,e,i)}},{key:"deleteEntry",value:function(t){var e=this.entryList.indexOf(t);this.entryList.splice(e,1)}},{key:"find",value:function(t,e,i){for(var n=[],r=0;r<this.entryList.length;r++)!0===i?this.entryList[r].match(t)&&n.push(r):!1===e?this.entryList[r]===t&&n.push(r):this.entryList[r].includes(t)&&n.push(r);return n}},{key:"newCopy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,i=void 0===e?null:e,n=t.entryList,r=void 0===n?null:n,a=t.minTimestamp,s=void 0===a?null:a,l=t.maxTimestamp,o=void 0===l?null:l;return null===i&&(i=this.name),null===r&&(r=this.entryList),null===s&&(s=this.minTimestamp),null===o&&(o=this.maxTimestamp),this.constructor(i,r,s,o)}},{key:"sort",value:function(){this.entryList.sort(function(t,e){return t[0]<t[1]})}},{key:"union",value:function(t){for(var e=this.newCopy(),i=0;i<t.entryList.length;i++)e.insertEntry(t.entryList[i],!1,"merge")}}]),t}(),M=function(t){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g()(this,e);var a=(i=i.map(function(t){var e=w()(t,2),i=e[0],n=e[1];return[parseFloat(i),n]})).map(function(t){return t[0]});null!==n&&a.push(parseFloat(n)),null!==r&&a.push(parseFloat(r)),n=Math.min.apply(Math,p()(a)),r=Math.max.apply(Math,p()(a));var s=c()(this,(e.__proto__||u()(e)).call(this,t,i,n,r));return s.tierType="TextTier",s}return f()(e,t),x()(e,[{key:"crop",value:function(t,i,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[],s=0;s<this.entryList.length;s++){var l=this.entryList[s][0];l>=t&&l<=i&&a.push(this.entryList[s])}var o=t,m=i;return!0===r&&(a=a.map(function(e){return[e[0]-t,e[1]]}),o=0,m=i-t),new e(this.name,a,o,m)}}]),e}(C),z=function(t){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g()(this,e);var a=(i=i.map(function(t){var e=w()(t,3),i=e[0],n=e[1],r=e[2];return[parseFloat(i),parseFloat(n),r]})).map(function(t){return t[0]}),s=i.map(function(t){return t[1]}),l=a.concat(s);null!==n&&l.push(parseFloat(n)),null!==r&&l.push(parseFloat(r)),n=Math.min.apply(Math,p()(a)),r=Math.max.apply(Math,p()(s));var o=c()(this,(e.__proto__||u()(e)).call(this,t,i,n,r));return o.tierType="IntervalTier",o}return f()(e,t),x()(e,[{key:"crop",value:function(t,i,n,r){for(var a=[],s=0;s<this.entryList.length;s++){var l=this.entryList[s],o=null,m=l[0],u=l[1],h=l[2];u<=t||m>=i||(m>=t&&u<=i?o=l:"lax"===n&&(m>=t||u<=i)?o=l:m>=t&&u>i?"truncated"===n&&(o=[m,i,h]):m<t&&u<=i?"truncated"===n&&(o=[t,u,h]):m<=t&&u>=i&&("lax"===n?o=l:"truncated"===n&&(o=[t,i,h])),null!==o&&a.push(o))}var p=t,v=i;return!0===r&&(a=a.map(function(e){return[e[0]-t,e[1]-t,e[2]]}),p=0,v=i-t),new e(this.name,a,p,v)}}]),e}(C),j=function(){function t(){g()(this,t),this.tierNameList=[],this.tierDict={},this.minTimestamp=null,this.maxTimestamp=null}return x()(t,[{key:"addTier",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o()(this.tierDict).includes(t.name))throw new Error("Tier name already exists in textgrid");null===e?this.tierNameList.push(t.name):this.tierNameList.splice(e,0,t.name),this.tierDict[t.name]=t,(null===this.minTimestamp||t.minTimestamp<this.minTimestamp)&&(this.minTimestamp=t.minTimestamp),(null===this.maxTimestamp||t.maxTimestamp>this.maxTimestamp)&&(this.maxTimestamp=t.maxTimestamp)}},{key:"crop",value:function(e,i,n,r){var a=new t,s=e,l=i;!0===r&&(s=0,l=i-e),a.minTimestamp=s,a.maxTimestamp=l;for(var o=0;o<this.tierNameList.length;o++){var m=this.tierNameList[o],u=this.tierDict[m].crop(e,i,n,r);a.addTier(u)}return a}},{key:"newCopy",value:function(){for(var e=new t,i=0;i<this.tierNameList;i++){var n=this.tierNameList[i];e.tierNameList.push(n),e.tierDict[n]=this.tierDict[n]}return e.minTimestamp=this.minTimestamp,e.maxTimestamp=this.maxTimestamp,e}},{key:"renameTier",value:function(t,e){var i=this.tierDict[t],n=this.tierNameList.indexOf(t);this.removeTier(t),this.addTier(i,n)}},{key:"removeTier",value:function(t){this.tierNameList.splice(this.tierNameList.index(t),1),delete this.tierDict[t]}},{key:"replaceTier",value:function(t,e){var i=this.tierNameList.indexOf(t);this.removeTier(t),this.addTier(e,i)}},{key:"getOutputText",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,i=0;i<this.tierNameList.length;i++)this.tierDict[this.tierNameList[i]].sort();for(var n=0;n<this.tierNameList.length;n++){var r=this.tierNameList[n],a=this.tierDict[r];a instanceof z&&(a=_(a,"",this.minTimestamp,this.maxTimestamp),null!==e&&(a=b(a,e)),this.tierDict[name]=a)}for(var s=0;s<this.tierNameList.length;s++)this.tierDict[this.tierNameList[s]].sort();var l="";l+='File type = "ooTextFile short"\n',l+='Object class = "TextGrid"\n\n',l+="${this.minTimestamp}\n${this.maxTimestamp}\n",l+="<exists>\n${this.tierNameList}\n";for(var o=0;o<this.tierNameList.length;o++)l+=this.tierDict[this.tierNameList[o]].getAsText();return l}}]),t}();var A=function(t){return-1!==(t=t.replace(/\r\n/g,"\n")).indexOf("ooTextFile short")||-1===t.indexOf("item")?function(t){for(var e=[],i=E(t,'"IntervalTier"'),n=0;n<i.length;n++)e.push([i[n],!0]);for(var r=E(t,'"TextTier"'),a=0;a<r.length;a++)e.push([r[a],!1]);e.push([t.length,null]),e.sort(function(t,e){return t[0]<t[1]});for(var s=[],l=0;l<e.length-1;l++)s.push([e[l][0],e[l+1][0],e[l][1]]);var o=t.slice(0,s[0][0]).split("\n"),m=parseFloat(o[3]),u=parseFloat(o[4]),h=new j;h.minTimestamp=m,h.maxTimestamp=u;for(var p=0;p<s.length;p++){var v=null,c=s[p][0],d=s[p][1],f=s[p][2],T=t.slice(c,d),g=O(T,"",O(T,"",0)[1]),y=w()(g,2),x=y[0],L=O(T,"",y[1]),F=w()(L,2),N=F[0],k=O(T,"",F[1]),_=w()(k,2),b=_[0],D=O(T,"",_[1])[1];N=parseFloat(N),b=parseFloat(b);var C=null,A=null,I=null,R=null,$=null,B=[];if(!0===f){for(;;){var V=O(T,"",D),W=w()(V,2);if(C=W[0],-1===(R=W[1]))break;var U=O(T,"",R),H=w()(U,2);A=H[0];var S=O(T,"",$=H[1]),Z=w()(S,2);I=Z[0],D=Z[1],""!==(I=I.trim())&&B.push([C,A,I])}v=new z(x,B,N,b)}else{for(;;){var G=O(T,"",D),P=w()(G,2);if(C=P[0],-1===($=P[1]))break;var q=O(T,"",$),J=w()(q,2);I=J[0],D=J[1],""!==(I=I.trim())&&B.push([C,I])}v=new M(x,B,N,b)}h.addTier(v)}return h}(t):function(t){var e=t.split("item ["),i=e.shift(),n=parseFloat(i.split("xmin = ",2)[1].split("\n",1)[0].trim()),r=parseFloat(i.split("xmax = ",2)[1].split("\n",1)[0].trim()),a="";e.shift();var s=new j;s.minTimestamp=n,s.maxTimestamp=r;for(var l=0;l<e.length;l++){a=e[l];var o=N,m="points";a.indexOf('class = "IntervalTier"')>-1&&(o=F,m="intervals");var u=D(a,m,2),h=u[0],p=u[1],v=h.split("name = ",2)[1].split("\n",1)[0].trim();v=v.slice(1,v.length-1);var c=h.split("xmin = ",2)[1].split("\n",1)[0].trim(),d=h.split("xmax = ",2)[1].split("\n",1)[0].trim(),f=[],T=0,g=null,y=null;if(console.log(o),o===F){for(var x=null,L=null,k=null;;){var _=O(p,"xmin = ",T),b=w()(_,2);if(L=b[0],(x=b[1])<=T)break;var E=O(p,"xmax = ",x),C=w()(E,2);k=C[0];var A=O(p,"text =",C[1]),I=w()(A,2);g=I[0],T=I[1],""!==(g=g.trim())&&f.push([parseFloat(L),parseFloat(k),g])}y=new z(v,f,c,d)}else{for(var R=null,$=null;;){var B=O(p,"number = ",T),V=w()(B,2);if($=V[0],(R=V[1])<=T)break;var W=O(p,"mark =",R),U=w()(W,2);g=U[0],T=U[1],""!==(g=g.trim())&&f.push([parseFloat($),g])}y=new M(v,f,c,d)}s.addTier(y)}return s}(t)},I={name:"TgToCsv",data:function(){return{msg:"Welcome to Your Vue.js App"}},methods:{ondrop:function(t){t.preventDefault(),this.className="dropzone";document.getElementById("dropzone"),document.getElementById("displayarea");for(var e=t.dataTransfer.files,i=0;i<e.length;i++){e[i].name.toLowerCase().includes(".textgrid")&&this.loadFromLocal(e[i],this.tgLoaded)}},ondragover:function(){return this.className="dropzone dragover",!1},ondragleave:function(){return this.className="dropzone",!1},loadFromLocal:function(t,e){var i=new FileReader;i.onload=function(i){var n=i.target.result;e(t,n)},i.readAsText(t)},tgLoaded:function(t,e){var i=t.name.split(".")[0]+".csv",n=A(e),r=this.tgToCsv(n,"Vowel",["Word","Vowel","Syllableid","Stress","Error"]);document.getElementById("displayarea").innerText=r,this.download(r,i,"text/plain")},download:function(t,e,i){var n=document.createElement("a"),r=new Blob([t],{type:i});n.href=URL.createObjectURL(r),n.download=e,n.click()},tgToCsv:function(t,e,i){var n=i.slice();n.push("Start Time"),n.push("End Time");var r=[n];console.log(t.tierNameList),console.log(e);for(var a=t.tierDict[e],s=0;s<a.entryList.length;s++){for(var l=a.entryList[s][0],o=a.entryList[s][1],m=t.crop(l,o,"truncated",!1),u=[],h=0;h<i.length;h++){var p="";if(m.tierNameList.includes(i[h])){var v=m.tierDict[i[h]];v.entryList.length>0&&(p=v.entryList[0][2])}u.push(p)}u.push(l),u.push(o),r.push(u)}return(r=r.map(function(t){return t.join(",")})).join("\n")}},mounted:function(){var t=document.getElementById("dropzone");t.ondrop=this.ondrop,t.ondragover=this.ondragover,t.ondragleave=this.ondragleave}},R={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"dropzone",attrs:{id:"dropzone"}},[this._v("\n    Drop files here\n  ")]),this._v(" "),e("br"),e("br"),this._v(" "),e("div",{staticClass:"displayarea",attrs:{id:"displayarea"}})])}]};var $=i("VU/8")(I,R,!1,function(t){i("RNoi")},"data-v-222e0641",null).exports;n.a.use(s.a);var B=new s.a({routes:[{path:"/",name:"HelloWorld",component:$}]});n.a.config.productionTip=!1,new n.a({el:"#app",router:B,components:{App:a},template:"<App/>"})},RNoi:function(t,e){},gsu9:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.18ec194091a7e7288401.js.map